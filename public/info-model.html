<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <title>Th√¥ng tin m√¥ h√¨nh</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            padding: 2rem;
        }

        .matrix-cell {
            width: 40px;
            height: 40px;
            text-align: center;
            border: 1px solid #ccc;
        }

        .matrix-header {
            font-weight: bold;
            background-color: #f0f0f0;
        }
    </style>
</head>

<body>
    <h2>üìä Th√¥ng tin m√¥ h√¨nh hu·∫•n luy·ªán</h2>
    <div id="model-info" class="mt-4"></div>

    <script>
        async function renderModelInfo() {
            try {
                const res = await fetch("/model-info.json");
                const data = await res.json();

                let html = `
                    <p><b>T·ªïng s·ªë ·∫£nh:</b> ${data.totalImages}</p>
                    <p><b>S·ªë v√≤ng l·∫∑p (epochs):</b> ${data.epochs}</p>
                    <p><b>Accuracy cu·ªëi c√πng:</b> ${data.accuracy}%</p>
                    <p><b>F1-score trung b√¨nh:</b> ${data.f1Score}</p>
                    <h5>üì∏ ·∫¢nh m·ªói d√≤ng xe:</h5>
                    <ul>
                `;
                for (const label in data.imagesPerClass) {
                    html += `<li>${label}: ${data.imagesPerClass[label]} ·∫£nh</li>`;
                }
                html += `</ul>`;

                // Per class metrics
                html += `
                <h5>üìà Ma tr·∫≠n nh·∫ßm l·∫´n - ƒê√°nh gi√° theo t·ª´ng l·ªõp</h5>
                <table class="table table-bordered table-sm">
                    <thead>
                        <tr>
                            <th>D√≤ng xe</th>
                            <th>TP</th>
                            <th>FP</th>
                            <th>FN</th>
                            <th>TN</th>
                            <th>Precision</th>
                            <th>Recall</th>
                            <th>F1</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${data.perClassMetrics.map(m => `
                            <tr>
                                <td>${m.class}</td>
                                <td>${m.TP}</td>
                                <td>${m.FP}</td>
                                <td>${m.FN}</td>
                                <td>${m.TN}</td>
                                <td>${m.precision}</td>
                                <td>${m.recall}</td>
                                <td>${m.f1}</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
                <ul>
        <li><strong>TP: </strong>S·ªë l∆∞·ª£ng ph√¢n lo·∫°i ch√≠nh x√°c</li>
        <li><strong>FP: </strong>B·ªã l·ªõp kh√°c ph√¢n lo·∫°i nh·∫ßm v√†o</li>
        <li><strong>FN: </strong>Ph√¢n lo·∫°i nh·∫ßm v√†o l·ªõp kh√°c</li>
        <li><strong>TN: </strong>T·ªïng c√°c l·ªõp c√≤n l·∫°i ƒë∆∞·ª£c ph√¢n lo·∫°i ch√≠nh x√°c</li>
    </ul>

                `;



                html += `
                <h5>üìä Trung b√¨nh</h5>
                <ul>
                    <li>Precision (Macro): <b>${data.macroAverage.precision}</b></li>
                    <li>Recall (Macro): <b>${data.macroAverage.recall}</b></li>
                    <li>Precision (Micro): <b>${data.microAverage.precision}</b></li>
                    <li>Recall (Micro): <b>${data.microAverage.recall}</b></li>
                    <li>F1-score t·ªïng h·ª£p: <b>${data.f1Score}</b></li>
                </ul>
                <a href="/" class="btn btn-secondary mt-3">‚¨Ö Quay l·∫°i trang nh·∫≠n di·ªán</a>
                `;

                document.getElementById("model-info").innerHTML = html;

            } catch (e) {
                document.getElementById("model-info").innerText = "‚ùå Kh√¥ng th·ªÉ t·∫£i th√¥ng tin m√¥ h√¨nh.";
            }
        }

        renderModelInfo();
    </script>
</body>

</html>